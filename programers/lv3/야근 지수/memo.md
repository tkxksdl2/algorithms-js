## [야근 지수](https://school.programmers.co.kr/learn/courses/30/lessons/12927)

---

점점 뒤쪽 문제를 풀다보니 3레벨 치고 쉬운 문제가 나오는 것 같다. 문제는 간단하다. works엔 여러 일의 남은 시간이 적혀있고, 이 시간들은 나중에 제곱해서 더해지므로 가능한 남은시간이 큰 작업을 우선으로 처리하는것이 항상 이득이다.

풀이는 여러 가지가 있겠지만 예전에는 그냥 매번 정렬해가며 가장 큰 work에 -1 해가는 것으로도 문제가 풀렸던 것 같다. 이제는 효율성 테스트가 생겨서 그렇게는 통과를 하지 못한다.

가능한 방법 또 하나로는 맥스힙을 만들어서 매번 가장 큰 작업에 -1을 해가는 방법도 있다. 하지만 자바스크립트로 힙을 직접 구현하기는 매우 귀찮고 n 최대값은 1000000인데 이런 숫자로 순회를 돌고 싶지는 않다.

그래서 난 일단 work를 내림차순으로 정렬했다. 그러면 앞쪽부터 가장 큰 숫자가 쌓일 것이고 이 숫자부터 차례로 작업을 해주면 된다. 그러나 n을 이용해 순회를 돌지 않을 것이므로 작업을 한꺼번에 처리할 필요가 있다.

가장 큰 작업부터 해치울 것이므로 작업의 중간에 works는 필연적으로 이러한 모양이 된다.

    [ 10, 10, 10, 10, 10, 5, 4, 3, 2, 1]

즉 어느 시점엔 처리할 가장 큰 작업 시간이 존재하고, 그 작업시간은 works의 앞쪽에 연속되어 나타난다. 따라서 이 작업시간과 연속되는 끝 index를 구하면 특정 시간 작업한 후 works가 어떤 상태인지 알 수 있다.

이 가장 큰 작업시간 maxVal은 단계를 밟아가며 감소하는데, 그 다음으로 작은 값을 목표로 감소한다.
위의 경우 maxVal은 10이며 목표 값은 5이다. 값이 maxVal인 작업의 수는 5개이므로, n이 5 \* 5 이상이라면 다음과 같은 상태에 도달할 수 있다.

    [ 5, 5, 5, 5, 5, 5, 4, 3, 2, 1]

이제 maxVal은 5가 되고, 여기서 n을 모두 소모했다면 maxVal값과 maxVal의 끝 index를 알고 있다면 전체 배열도 알 수 있으므로 답을 구할 수 있다.

만약 단계를 밟아 감소시키는데 n이 충분히 크지 않은 경우가 있을 수 있다. 그때는 이러한 모양이 된다.

    [ 8, 8, 8, 7, 7, 5, 4, 3, 2, 1]

이 때 maxVal은 8이고, 8까지 낮추고 나머지가 남아 두 개의 maxVal을 -1 했다. 이 경우 이러한 중간값의 개수를 midCnt에 저장한다. 그렇다면 maxVal과 maxVal의 끝 idx, midCnt를 알고 있다면 전체 배열을 만들 수 있다.

```javascript
return works.reduce(
  (pre, cur, idx) =>
    idx <= i
      ? midCnt-- > 0
        ? pre + (maxVal - 1) ** 2
        : pre + maxVal ** 2
      : pre + cur ** 2,
  0
);
```
