## [스타 수열](https://school.programmers.co.kr/learn/courses/30/lessons/70130)

---

스타 수열의 의미를 자세히 확인하면 다음과 같다.

1. 스타수열은 a의 부분수열이면서 길이가 2 이상이다.

2. 스타수열은 앞에서부터 2개의 원소로 나눌 수 있으며, 이 두개의 원소 중 하나는 하나의 스타 수열에서 같은 숫자로 핵심 숫자이다.

3. 두개의 원소 중 하나는 2번에 등장한 핵심 숫자가 아닌 다른 숫자이다.

따라서 스타수열에는 핵심이 될 핵심 숫자가 존재하므로, a 내에 n 종류의 숫자가 있다면 n 종류의 스타 수열이 존재한다는 뜻이 된다.

스타 수열의 최대 길이는 핵심숫자의 총 개수 \* 2이며, 어떤 위치의 핵심숫자의 좌우에 다른 숫자와 함께 묶일 수 없는 경우 그 핵심 숫자는 사용할 수 없으므로 길이가 2씩 줄어든다.

그 핵심숫자를 쓸 수 있는지 없는지는 그 숫자의 좌우 공간에 따라 달라진다. 그런데 무조건 숫자 좌우가 다른 숫자일 경우에 가능한 것은 아니다. 어떤 숫자는 숫자의 우측 공간밖에 사용할 수 없으므로 이전 핵심숫자가 어느 공간을 차지하는지도 알아야 한다.

    [1, x, 1, x, 1] -> 앞에서부터 묶는다면 마지막 핵심숫자 1은 사용할 수 없다.

    [x, 1, 1, x] -> 모든 핵심숫자를 사용할 수 있다. 이때 첫 번째 1은 앞공간, 두 번째 1은 뒷공간을 사용한다.

이러한 규칙에 따라 각 숫자에 따라 그 숫자를 핵심으로 하는 스타수열의 총 길이와, 마지막 핵심숫자 위치, 그리고 마지막 핵심숫자가 앞 혹은 뒷공간을 사용했는지를 저장해가며 a 를 순회한다.

앞에서부터 순회하기 때문에 기본적으로 숫자의 앞 공간을 사용하는것이 더 유리하다. 그러하지 못할 떄만 뒷공간을 사용한다. 하나의 핵심숫자가 사용 가능한것으로 판별될 때 마다 그 스타수열의 총길이에 +2를 해준다.

만약 이전 핵심숫자와 현재 핵심숫자의 index가 3 이상 차이난다면 그 핵심숫자는 항상 사용할 수 있다. 언제나 사용 가능한 공간이 앞에 존재하기 때문이다.

    [1, x, x, 1]

index차가 2라면 이전 핵심숫자가 어느 공간을 사용했는지를 확인해야 한다. 만약 이전에 뒷공간을 사용했다면 이번 핵심숫자도 뒷공간이 필요하다.

    [1, x, 1, x]

index차가 1이라면 항상 뒷공간이 필요하다.

    [x, 1, 1, x]

이 규칙에 따라 숫자가 등장할 때 마다 그 숫자를 핵심숫자로 하는 스타 수열의 정보를 갱신한다. 정보가 갱신될 때 마다 answer와 비교해서 가장 큰 값을 리턴해주면 그것이 정답이다.
