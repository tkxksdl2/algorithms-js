## [2023 현대모비스 알고리즘 경진대회 예선 에어컨](https://school.programmers.co.kr/learn/courses/30/lessons/214289)

---

조건을 잘 생각해야하는 dp문제. 처음엔 이 문제를 dp로 해결해야겠다는 생각을 빨리 하지 못해서 당황스러운 문제였다.

에어컨을 끄거나, 키거나, 에어컨의 희망온도를 맘대로 설정할 수 있다는 점이 문제를 복잡해보이게 하지만, 사실 생각보다 복잡한 문제는 아니다.

어떤 경우에든 실내온도는 이전 시간에 비해서 1도 올라가거나, 1도 내려가거나, 그대로 유지된다. 또한 어떤 경우든 1분전에 에어컨은 가동되었거나, 그렇지 않았다.

따라서 현재 시간 time의 온도가 temp라면, 이 온도는 time-1 시간대에서 temp-1, temp, temp+1 중에 하나였을 것이고, 이 온도가 에어컨이 가동되었거나 그렇지 않아서 변화된 값일 것이다.

각각의 경우에 따라 사용되는 비용이 다르기 때문에, 이러한 경우를 취합하여 시간 time의 온도 temp에 도달할 수 있는 가장 작은 cost를 갱신해 나가면 가장 마지막 시간의 비용 중 가장 작은 비용이 이 문제의 답이된다.

---

따라서 이 문제는 시간과 온도를 행과 열, 비용을 값으로하는 dp 문제로 만들어 해결할 수 있다. 처음 dp 행렬은 모두 Infinity로 갱신되어있고, 0분의 실외온도만 비용 0으로 갱신한다.

dp 순회는 1분부터 가능한 모든 온도 범위를 순회한다. 만약 현재 시간대에 승객이 존재하고, 현재 온도가 목표 온도 범위의 외부에 존재한다면, 그 온도의 비용은 갱신하지 않는다. 즉 Infinity로 유지한다.

그렇지 않다면 이전 시간대의 temp-1, temp, temp+1 위치의 비용을 이용해 얼마만큼의 비용이 추가되었을지 그 최소값을 구한다.

여기서 이전시간대의 온도가 bt라고 할 때, bt가 temp와 같다면 온도는 유지되었다는 의미이다. 이 때 온도를 유지하기 위해선 이전 단계의 비용에 +b만큼이 추가되는데, 만약 bt가 실외온도와 같다면 에어컨을 아예 켜지 않아도 온도가 유지되므로 이전 단계의 비용을 그대로 가져온다.

그 외의 경우는 온도가 변화했다는 뜻이다. 그런데 변화의 방향이 비용에 영향을 끼친다. 온도가 외부온도에 멀어지는 방향으로 변화했다면 에어컨을 켰다는 뜻이고, 외부온도에 가까워졌다면 에어컨을 켜지 않았다는 의미이다.

물론 에어컨을 켜도 외부온도에 가까워질 수 있지만 비용 측면에서 굳이 그럴 이유가 없고 항상 최소비용만을 갱신하므로 생각할 필요가 없다.

따라서 이러한 방향성을 다음과 같이 확인할 수 있다.

```javascript
const isSystemOn = (bt - temp) * (bt - temperature - 10) <= 0;
```

bt - temp 는 변화한 온도의 방향이고, (bt - temperature - 10)는 이전 온도와 실외온도와의 방향 관계이다. 이 두 값을 곱했을 때 음수가 나오면 두 방향이 반대가 되므로 에어컨이 켜진 것이고, cost에 +a를 해준다.

이 값이 양수이면 당연히 에어컨은 꺼진 것이며 이전 cost를 그대로 가져온다. 예외적으로 bt가 외부온도와 같다면 이 값은 0이되는데, 이 경우는 온도가 변화한 상황이고 외부온도와 같은 온도에서 온도가 변했다면 에어컨을 켰을 수밖에 없다. 따라서 0인 경우도 에어컨을 킨 것으로 생각한다.

이 과정을 반복해가며 각 time, temp 위치에 항상 최소값을 갱신해준다. 그러면 마지막 시간의 시점에 도달할 수 있는 최소 cost를 구할수 있다.
