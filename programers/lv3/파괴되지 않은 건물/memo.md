## [2022 카카오 파괴되지 않은 건물](https://school.programmers.co.kr/learn/courses/30/lessons/92344)

---

2차원 배열에 값을 변화시키는 단순해보이는 문제이지만, 문제에 효율성 제한이 걸려있어 skill의 값에 따라 매 배열의 값을 변화시키면 시간초과가 일어난다.

skill의 최대 길이가 25만이고, board의 가로 세로가 최대 1000 씩이므로 단순 계산으로 O(250000 \* 1000 \* 1000)의 복잡도를 가지게 된다.

따라서 매 skill 입력마다 값을 변화시키는 것이 아니라 값을 일시적으로 저장해두었다가 한번에 계산하는 것이 합리적이다.

skill은 직사각형의 시작과 끝 위치와 더해줄 값을 입력받는데, 이를 단순화하기 위해서 board와 크기가 같은 0으로 초기화된 배열 cache에 특정 위치에 더할 값을 저장해준다. 이때 모든 위치에 값을 저장하는 것은 의미가 없으므로, 직사각형이 시작되는 위치에만 값을 저장해두고, 그 위치로부터 y, x가 큰 모든위치에 해당 값을 더해주는 것으로 생각한다.

하지만 이것만 저장하면 되면 직사각형 범위를 벗어나는 곳에도 값이 더해지므로, 직사각형의 나머지 네 꼭지점에도 같은 값을 더하거나 빼주어서 나머지 값의 균형을 맞추어야 한다. 예를 들어, skill 입력이 [1, 0, 0, 1, 1 5] 라면 cache는 아래와 같이 저장될 것이다.

    [[5, 0, -5],
     [0, 0, 0],
     [-5, 0, 5]]

각 위치에서 보다 큰 위치로 모두 값을 더해준다고 했을 때, 다음과 같이 원래 원했던 결과를 얻을 수 있다.

    [[5, 5, 0],
     [5, 5, 0],
     [0, 0, 0]]

이러한 방법을 사용해 skill 입력 하나마다 최대 4개의 인덱스만을 변형하면서 값을 저장하다가. 모든 skill을 입력받은 후 cache를 이용해 board의 값을 변경해주면 된다.
